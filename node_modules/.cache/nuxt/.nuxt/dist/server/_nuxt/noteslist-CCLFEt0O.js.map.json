{"file":"noteslist-CCLFEt0O.js","mappings":";;;;;;;AAqJA,UAAM,OAAO,IAAI;AAAA,MACf,OAAO;AAAA,MACP,SAAS;AAAA,IAAA,CACV;AACD,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,gBAAgB,IAAI,oBAAI,KAAK;AACnC,UAAM,gBAAgB,IAAI,IAAI;AAC9B,UAAM,WAAW,IAAI;AAAA,MACnB,WAAW;AAAA,MACX,aAAa;AAAA,IAAA,CACd;AAED,UAAM,cAAc,IAAI,EAAE;AAC1B,UAAM,aAAa,IAAI,QAAQ;AAE/B,UAAM,gBAAgB,SAAS,MAAM;AACnC,UAAI,SAAS,CAAC,GAAG,MAAM,KAAK;AAG5B,UAAI,YAAY,MAAM,QAAQ;AAC5B,cAAM,IAAI,YAAY,MAAM,KAAA,EAAO,YAAA;AACnC,iBAAS,OAAO;AAAA,UAAO,UACrB,KAAK,MAAM,YAAA,EAAc,SAAS,CAAC;AAAA,QAAA;AAAA,MAEvC;AAGA,cAAQ,WAAW,OAAA;AAAA,QACjB,KAAK;AACH,iBAAO,KAAK,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS,CAAC;AACnE;AAAA,QACF,KAAK;AACH,iBAAO,KAAK,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS,CAAC;AACnE;AAAA,QACF,KAAK;AACH,iBAAO,KAAK,CAAC,GAAG,MAAM,EAAE,MAAM,cAAc,EAAE,KAAK,CAAC;AACpD;AAAA,QACF,KAAK;AACH,iBAAO,KAAK,CAAC,GAAG,MAAM,EAAE,MAAM,cAAc,EAAE,KAAK,CAAC;AACpD;AAAA,MAAA;AAIJ,aAAO;AAAA,IACT,CAAC;AA0BD,aAAS,WAAW,IAAI;AACtB,aAAO,cAAc,MAAM,IAAI,EAAE;AAAA,IACnC;AAOA,aAAS,WAAW,YAAY;AAC9B,aAAO,IAAI,KAAK,UAAU,EAAE,eAAA;AAAA,IAC9B;;mBArOOA,eAAAC,WAAA,EAAA,OAAM,gCAA4B,MAAA,CAAA,w9BAoBhBC,cAAA,SAAA,KAAA,MAAK,KAAK,oOAWVA,cAAA,SAAA,KAAA,MAAK,OAAO,4eAoBd,YAAA,KAAW,oPAKL,WAAA,KAAU,oBAAV,WAAA,OAAU,QAAA,kBAAV,WAAA,OAAU,QAAA,CAAA,IAAA,cAAA,qFAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,QAAA,kBAAV,WAAA,OAAU,QAAA,CAAA,IAAA,cAAA,kFAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,KAAA,kBAAV,WAAA,OAAU,KAAA,CAAA,IAAA,cAAA,+EAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,KAAA,kBAAV,WAAA,OAAU,KAAA,CAAA,IAAA,cAAA;AAOnB,UAAAC,MAAA,aAAA,EAAc,QAAM;;AAEXC,sBAAAD,MAAA,aAAA,IAAR,SAAI;;cAIA,cAAA,UAAkB,KAAK,QAAM;gCAE3BD,cAAA,SAAA,SAAA,MAAS,KAAK,mJAKdG,eAAA,SAAA,MAAS,OAAO;;AAkBpB,kBAAA,yJAAAA,eAAA,KAAK,KAAK,CAAA,GAAA;AACD,gBAAA,KAAK,SAAO;;mBACR,WAAW,KAAK,MAAM,GAAA;;;;;;;;;;AA6BjC,gBAAA,KAAK,WAAW,WAAW,KAAK,MAAM,GAAA;AAC1C,oBAAA,iCAAAA,eAAA,KAAK,OAAO,CAAA,MAAA;AAAA;;;;;kFAKL,WAAW,KAAK,SAAS,CAAA,CAAA,MAAA;AAE9B,cAAA,KAAK,WAAS;+EACT,WAAW,KAAK,SAAS,CAAA,CAAA,MAAA;AAAA;;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_unref","_ssrRenderList","_ssrInterpolate"],"sources":["../../../../../../../app/pages/noteslist.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex flex-col\">\r\n    <header class = \"w-full shadow-lg mb-1 p-4 flex justify-end rounded-md border-b-5 border-purple-600\">\r\n      <button\r\n        class=\" flex gap-4 border-1 border-purple-300 text-purple-500 px-4 py-2 rounded-md hover:border-purple-600 hover:text-purple-900 hover:bg-purple-100\"\r\n        @click=\"logout\"\r\n        \r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25\" />\r\n        </svg>\r\n        Logout\r\n      </button>\r\n    </header>\r\n    <main class=\"flex-1 flex items-start justify-center bg-gray-100 gap-10 py-10\">\r\n        <div class=\"w-full max-w-md p-8 bg-white rounded-xl shadow-md mb-10\">\r\n          <div class=\"text-2xl font-bold text-center mb-6 bg-purple-600 text-white p-4 rounded-t-md\">Post Note</div>\r\n          <form @submit.prevent=\"post\">\r\n            <div class=\"mb-4\">\r\n              <label class=\"block text-gray-700 mb-1\" for=\"title\">Title</label>\r\n              <input\r\n                v-model=\"form.title\"\r\n                id=\"title\"\r\n                type=\"text\"\r\n                required\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-purple-300\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"mb-4\">\r\n              <label class=\"block text-gray-700 mb-1\" for=\"content\">Content</label>\r\n              <input\r\n                v-model=\"form.content\"\r\n                id=\"content\"\r\n                type=\"text\"\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-purple-300\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              class=\"w-full bg-purple-400 text-white font-bold text-2xl py-2 px-4 rounded-md hover:bg-purple-600 transition\"\r\n            >\r\n              Post\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div class=\"w-full max-w-2xl bg-white p-6 rounded-xl shadow-md\">\r\n          <h2 class=\"text-xl font-bold mb-4 bg-purple-600 text-white p-4 rounded-t-md\">Your Notes</h2>\r\n          <div class = \"flex\">\r\n            <input\r\n              v-model=\"searchQuery\"\r\n              type=\"text\"\r\n              placeholder=\"Search by title\"\r\n              class=\"w-full p-2 border rounded mb-4 border-neutral-300\"\r\n            />\r\n            <select v-model=\"sortOption\" class=\"p-2 border rounded mb-4 ml-2 border-neutral-300 text-neutral-500\">\r\n              <option value=\"newest\">Newest First</option>\r\n              <option value=\"oldest\">Oldest First</option>\r\n              <option value=\"a-z\">Title A-Z</option>\r\n              <option value=\"z-a\">Title Z-A</option>\r\n            </select>\r\n          </div>\r\n          <ul v-if=\"filteredNotes.length\">\r\n            <li\r\n              v-for=\"note in filteredNotes\"\r\n              :key=\"note.noteID\"\r\n              class=\"mb-4 p-4 border border-gray-200 rounded-md\"\r\n            >\r\n              <div v-if=\"editingNoteId === note.noteID\">\r\n                <input\r\n                  v-model=\"editForm.title\"\r\n                  class=\"w-full mb-2 px-3 py-2 border rounded\"\r\n                  placeholder=\"Title\"\r\n                />\r\n                <textarea\r\n                  v-model=\"editForm.content\"\r\n                  class=\"w-full mb-2 px-3 py-2 border rounded\"\r\n                  placeholder=\"Content\"\r\n                ></textarea>\r\n\r\n                <div class=\"flex gap-2\">\r\n                  <button @click=\"saveEdit(note.noteID)\" class=\"bg-green-500 text-white px-4 py-1 rounded hover:bg-green-600\">\r\n                    Save\r\n                  </button>\r\n                  <button @click=\"cancelEdit\" class=\"bg-gray-300 px-4 py-1 rounded hover:bg-gray-400\">\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-else @click=\"note.content && toggleNote(note.noteID)\" class=\"cursor-pointer\">\r\n                <div class=\"flex justify-between items-center\">\r\n                  <div class=\"flex text-lg items-center gap-1 font-semibold text-purple-600\">\r\n                    {{ note.title }}\r\n                    <span v-if=\"note.content\" class=\"hover:bg-purple-100 p-1 rounded-full\">\r\n                      <svg v-if = \"!isExpanded(note.noteID)\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-4\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m8.25 4.5 7.5 7.5-7.5 7.5\" />\r\n                      </svg>\r\n                      <svg v-else xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-4\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />\r\n                      </svg>\r\n\r\n                    </span>\r\n                  </div>\r\n                  <div class=\"flex\">\r\n                    <button\r\n                      @click.stop=\"startEditing(note)\"\r\n                      class=\"px-3 py-3 rounded-xl text-yellow-600 hover:bg-yellow-100\"\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-4\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\" />\r\n                      </svg>\r\n                    </button>\r\n                    <button\r\n                      @click=\"deleteNote(note.noteID)\"\r\n                      class=\"px-3 py-3 rounded-xl text-red-600 hover:bg-red-100\"\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-4\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\" />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <p v-if=\"note.content && isExpanded(note.noteID)\" class=\"text-gray-600 mt-2\">\r\n                  {{ note.content }}\r\n                </p>\r\n              </div>\r\n\r\n              <p class=\"text-xs text-gray-400 mt-1\">\r\n                Created: {{ formatDate(note.createdOn) }}\r\n              </p>\r\n              <p v-if=\"note.updatedOn\" class=\"text-xs text-gray-400\">\r\n                Updated: {{ formatDate(note.updatedOn) }}\r\n              </p>\r\n            </li>\r\n          </ul>\r\n          <p v-else class=\"text-gray-500\">No notes found.</p>\r\n        </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from 'vue';\r\nconst config = useRuntimeConfig();\r\n\r\nconst form = ref({\r\n  title: '',\r\n  content: ''\r\n});\r\nconst notes = ref([]);\r\nconst expandedNotes = ref(new Set());\r\nconst editingNoteId = ref(null);\r\nconst editForm = ref({\r\n  noteTitle: '',\r\n  noteContent: ''\r\n});\r\n\r\nconst searchQuery = ref('');\r\nconst sortOption = ref('newest');\r\n\r\nconst filteredNotes = computed(() => {\r\n  let result = [...notes.value];\r\n\r\n  // 1. Search\r\n  if (searchQuery.value.trim()) {\r\n    const q = searchQuery.value.trim().toLowerCase();\r\n    result = result.filter(note =>\r\n      note.title.toLowerCase().includes(q)\r\n    );\r\n  }\r\n\r\n  // 2. Sort\r\n  switch (sortOption.value) {\r\n    case 'newest':\r\n      result.sort((a, b) => new Date(b.createdOn) - new Date(a.createdOn));\r\n      break;\r\n    case 'oldest':\r\n      result.sort((a, b) => new Date(a.createdOn) - new Date(b.createdOn));\r\n      break;\r\n    case 'a-z':\r\n      result.sort((a, b) => a.title.localeCompare(b.title));\r\n      break;\r\n    case 'z-a':\r\n      result.sort((a, b) => b.title.localeCompare(a.title));\r\n      break;\r\n  }\r\n\r\n\r\n  return result;\r\n});\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem('token');\r\n  window.location.href = '/';\r\n};\r\n\r\n\r\nfunction startEditing(note) {\r\n  editingNoteId.value = note.noteID;\r\n  editForm.value.title = note.title;\r\n  editForm.value.content = note.content;\r\n}\r\n\r\nfunction cancelEdit() {\r\n  editingNoteId.value = null;\r\n}\r\n\r\nfunction toggleNote(id) {\r\n  if (expandedNotes.value.has(id)) {\r\n    expandedNotes.value.delete(id);\r\n  } else {\r\n    expandedNotes.value.add(id);\r\n  }\r\n}\r\n\r\nfunction isExpanded(id) {\r\n  return expandedNotes.value.has(id);\r\n}\r\n\r\nfunction getToken() {\r\n  return localStorage.getItem('token');\r\n}\r\n\r\n\r\nfunction formatDate(dateString) {\r\n  return new Date(dateString).toLocaleString();\r\n}\r\n\r\n\r\n\r\nasync function deleteNote(id) {\r\n  const token = getToken();\r\n  if (!confirm('Are you sure you want to delete this note?')) return;\r\n\r\n  try {\r\n    await $fetch(`${config.public.apiBase}/Note/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n\r\n    // Refresh the notes list\r\n    await fetchNotes();\r\n  } catch (err) {\r\n    console.error('Failed to delete note:', err);\r\n  }\r\n}\r\n\r\n\r\n\r\nasync function saveEdit(noteID) {\r\n  const token = getToken();\r\n  try {\r\n    await $fetch(`${config.public.apiBase}/Note`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: {\r\n        noteID: noteID,\r\n        noteTitle: editForm.value.title,\r\n        noteContent: editForm.value.content\r\n      }\r\n    });\r\n\r\n    editingNoteId.value = null;\r\n    await fetchNotes(); // Refresh list\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n}\r\n\r\n\r\n\r\n// Fetch notes from API\r\nasync function fetchNotes() {\r\n  const token = getToken();\r\n\r\n  try {\r\n    const data = await $fetch(`${config.public.apiBase}/Note`, {\r\n      method: 'GET',\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    notes.value = data;\r\n  } catch (err) {\r\n    console.error('Failed to fetch notes:', err);\r\n  }\r\n}\r\n\r\n// Post new note to API\r\nasync function post() {\r\n  const token = getToken();\r\n\r\n  try {\r\n    await $fetch(`${config.public.apiBase}/Note`, {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: {\r\n        noteTitle: form.value.title,\r\n        noteContent: form.value.content\r\n      }\r\n    });\r\n\r\n    form.value.title = '';\r\n    form.value.content = '';\r\n    await fetchNotes(); // Refresh notes after post\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n}\r\n\r\n// Load notes on page mount\r\nonMounted(fetchNotes);\r\n</script>\r\n"],"version":3}